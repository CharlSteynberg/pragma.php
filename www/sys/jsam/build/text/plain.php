<?

// recursively build output
// --------------------------------------------------------------------------------------
   function _build_text_plain($dfn, $lvl, $cfg, $vrs)
   {
   // buffers
   // -----------------------------------------------------------------------------------
      $rsl = '';
      $ind = '';
      $tab = '';
      $nlc = '';
   // -----------------------------------------------------------------------------------


   // indentation
   // -----------------------------------------------------------------------------------
      if ($cfg->minified === false)
      {
         $tab = '   ';
         $nlc = "\n";

         for ($l=0; $l<$lvl; $l++){ $ind .= $tab; }
      }
   // -----------------------------------------------------------------------------------

   throw new Exception('build type: "text/plain" is not developed yet, please build it :)');

   }
// --------------------------------------------------------------------------------------



// recursively build output
// --------------------------------------------------------------------------------------
   function _build_text_plain_bot($dfn, $lvl, $cfg, $vrs)
   {
   // locals
   // -----------------------------------------------------------------------------------
      $rsl = '';
   // -----------------------------------------------------------------------------------

   // loop & build
   // -----------------------------------------------------------------------------------
      foreach ($dfn as $key => $itm)
      {
         if (is_int($key))
         { $rsl .= _build_text_plain_bot($itm, $lvl, $cfg, $vrs); }
         else
         {
            if (typeOf($itm) === arr)
            {
               foreach ($itm as $val)
               { $rsl .= "$key: $val\n"; }
            }
            else
            { $rsl .= "$key: $itm\n"; }
         }
      }
   // -----------------------------------------------------------------------------------

   // return result
   // -----------------------------------------------------------------------------------
      return $rsl;
   // -----------------------------------------------------------------------------------
   }
// --------------------------------------------------------------------------------------



// compiler
// --------------------------------------------------------------------------------------
   set::{"jsam.build.text.plain"}
   (
      function($dfn, $vrs, $sub=null)
      {
         $cfg = parse::file('cfg/jsam/build.text.plain.jsam');
         $sub = (($sub !== null) ? '_'.$sub : '');

         if ($cfg->minified === 'auto')
         { $cfg->minified = ((liveMode === false) ? false : true); }

         return call('_build_text_plain'.$sub, [$dfn, 0, $cfg, $vrs]);
      }
   );
// --------------------------------------------------------------------------------------

?>
